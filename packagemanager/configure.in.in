## lib configure.in.in

## initialize
@YAST2-INIT-COMMON@
@YAST2-INIT-LIB@

## some common checks
@YAST2-CHECKS-COMMON@
@YAST2-CHECKS-LIB@

yast_found_libcurl=no
AC_CHECK_HEADER(curl/curl.h,[yast_found_libcurl=yes])
if [[ "$yast_found_libcurl" = "no" ]]; then
 AC_MSG_ERROR(Headers for libcurl are missing. Please install the package curl-devel.)
fi

yast_found_libslp=no
AC_CHECK_HEADER(slp.h,[yast_found_libslp=yes])
if [[ "$yast_found_libslp" = "no" ]]; then
 AC_MSG_ERROR(Headers for libslp are missing. Please install the package openslp-devel.)
fi

yast_found_libpopt=no
AC_CHECK_HEADER(popt.h,[yast_found_libpopt=yes])
if [[ "$yast_found_libpopt" = "no" ]]; then
 AC_MSG_ERROR(Headers for libpopt are missing. Please install the package popt-devel.)
fi

yast_found_libxml2=no
AC_CHECK_HEADER(libxml2/libxml/xmlexports.h,[yast_found_libxml2=yes])
if [[ "$yast_found_libxml2" = "no" ]]; then
 AC_MSG_ERROR(Headers for libxml2 are missing. Please install the package libxml2-devel.)
fi

yast_found_librpm=no
AC_CHECK_HEADER(rpm/rpmdb.h,[yast_found_librpm=yes])
if [[ "$yast_found_librpm" = "yes" ]]; then
  AC_MSG_CHECKING(for DB_VERSION 4.1)
  AC_TRY_RUN([
	#include <rpm/rpmdb.h>
	#include <stdio.h>
	int main() {
	  if ( DB_VERSION_MAJOR == 4 && DB_VERSION_MINOR >= 1 )
	    return 0;
	  fprintf( stderr, "Expected DB_VERSION 4.1. Found %d.%d\n", DB_VERSION_MAJOR, DB_VERSION_MINOR );
	  return 1;
	}
  ],
  [yast_found_librpm=yes],
  [yast_found_librpm=no],
  [yast_found_librpm=no])
  AC_MSG_RESULT($yast_found_librpm)
fi
if [[ "$yast_found_librpm" = "no" ]]; then
  AC_MSG_ERROR(Please install the package rpm-devel >= 4.1.1.)
fi

## and generate the output
#AC_CONFIG_FILES(doc/Y2-access.html doc/Y2-components.html)
@YAST2-OUTPUT@
